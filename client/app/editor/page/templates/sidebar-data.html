<sidebar-item-host [cardClasses]="additionalCardClasses">
  <!-- Tell the user if the page has absolutly no data associated -->
  <div *ngIf="!hasAnyData && !showQueryDropTarget"
       class="alert alert-info"
       role="alert">
    <p class="card-text">
      <strong>Bisher sind für diese Seite keine speziellen Daten ver&shy;füg&shy;bar</strong>. Nutze die Da&shy;ten&shy;bank, Seiten&shy;parametern oder Eingab&shy;elemente um mit deinen Benutzern zu interagieren.
    </p>
  </div>

  
  <div *ngIf="showQueryDropTarget"
       class="block-container block">
    <div (dragover)="onAddQueryReferenceDrag($event)"
         (drop)="onAddQueryReferenceDrop($event)"
         class="column blueprint text-xs-center">
      <span class="fa fa-plus"></span>
      Abfrage
    </div>
  </div>
  
  <!-- Page URL data -->
  <div *ngIf="showPageRequestParameters"
       class="block-container block">
    <span class="caption">
      Seitenparameter
    </span>
    <ul class="fa-ul">
      <li *ngFor="let parameter of page.requestParameters;">
        <span class="fa fa-li fa-sign-in" aria-hidden="true"></span>
        <span (dragstart)="startParameterValueProviderDrag($event, parameter.fullName)"
              draggable="true"
              class="column indent">
          {{ parameter.fullName }}
        </span>
      </li>
    </ul>
  </div>

  <!-- Query data & parameters -->
  <h5 *ngIf="referencedQueries.length > 0"
      class="block-container caption">
    Abfragen
  </h5>
  
  <!-- The query itself -->
  <div *ngFor="let used of referencedQueries;"
       class="block-container block">
    <span (dragstart)="startReferencedQueryDrag($event, used)"
          [title]="used.query.name"
          draggable="true"
          class="table">
      <query-icon [query]="used.query"
                  [detailSelect]="true"
                  [showName]="false"></query-icon>{{ used.name }}
    </span>
    
    <!-- Parameters for this query -->
    <ul *ngIf="used.query.hasParameters"
        class="fa-ul">
      <li *ngFor="let parameter of used.mapping;">
        <span class="fa fa-li {{parameter.providingIconClass}}" aria-hidden="true"></span>
        <span (dragover)="onParameterDrag($event)"
              (drop)="onParameterDrop($event, parameter)"
              class="parameter indent">
          {{ parameter.parameterName }}
        </span>
      </li>
    </ul>
    
    <!-- Columns of this query -->
    <ul *ngIf="used.hasColumns"
        class="fa-ul">
      <li *ngFor="let column of used.columns; trackBy: trackByColumnId;">
        <span class="fa fa-li fa-sign-in" aria-hidden="true"></span>
        <span (dragstart)="startColumnDrag($event, used, column)"
              [title]="column.fullName"
              class="column indent"
              draggable="true">
          {{ column.shortName }}
        </span>
      </li>
    </ul>
  </div>
  
  <!-- Globally available data -->
  <div class="block-container block">
    <span class="caption">
      Konstanten
    </span>
    <ul class="fa-ul">
      <li *ngFor="let constant of availableConstants;">
        <span class="fa fa-li fa-sign-in" aria-hidden="true"></span>
        <span class="column indent">{{ constant }}</span>
      </li>
    </ul>
  </div>
</sidebar-item-host>
